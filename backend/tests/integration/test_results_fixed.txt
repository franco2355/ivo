=== RUN   TestActivityCapacityLimit
    activity_capacity_test.go:16: ğŸš€ Iniciando test de integraciÃ³n: Activity Capacity Limit
    activity_capacity_test.go:19: 
        ğŸ“ PASO 1: Registrar nuevo usuario y admin
    activity_capacity_test.go:22: âœ… Admin logueado - ID: 1
    helpers.go:136: âœ… Usuario registrado - Username: user_56461, ID: 26
    activity_capacity_test.go:26: âœ… Usuario 1 registrado - ID: 26, Username: user_56461
    activity_capacity_test.go:33: 
        ğŸ“ PASO 2: Crear actividad con cupo limitado (3 personas)
    activity_capacity_test.go:82: âœ… Actividad creada con ID: 91, Cupo: 3
    activity_capacity_test.go:85: 
        ğŸ“ PASO 3: Activar suscripciÃ³n Premium para usuario
    activity_capacity_test.go:90: âœ… SuscripciÃ³n activada
    activity_capacity_test.go:93: 
        ğŸ“ PASO 4: Inscribir 3 veces para llenar el cupo
    activity_capacity_test.go:125: âœ… Primera inscripciÃ³n exitosa
    activity_capacity_test.go:131: 
        ğŸ“ PASO 5: Verificar informaciÃ³n de la actividad
    activity_capacity_test.go:149: âœ… Actividad consultada - Cupo total: 3, Lugares disponibles: 2
    activity_capacity_test.go:152: âœ… Lugares ocupados correctamente (Disponibles: 2 de 3)
    activity_capacity_test.go:156: 
        ğŸ“ PASO 6: Desinscribirse y verificar que se libera el cupo
    activity_capacity_test.go:159: âœ… DesinscripciÃ³n exitosa
    activity_capacity_test.go:178: âœ… Cupo liberado correctamente (Disponibles ahora: 3)
    activity_capacity_test.go:184: 
        ğŸ“ PASO 7: Re-inscribirse a la actividad
    activity_capacity_test.go:201: âœ… Re-inscripciÃ³n exitosa
    activity_capacity_test.go:204: 
        ================================================================================
    activity_capacity_test.go:205: ğŸ‰ TEST DE LÃMITE DE CUPOS COMPLETADO EXITOSAMENTE!
    activity_capacity_test.go:206: ================================================================================
    activity_capacity_test.go:207: âœ… Actividad con cupo limitado creada
    activity_capacity_test.go:208: âœ… InscripciÃ³n exitosa dentro del cupo
    activity_capacity_test.go:209: âœ… InformaciÃ³n de cupos consultada correctamente
    activity_capacity_test.go:210: âœ… DesinscripciÃ³n libera el cupo
    activity_capacity_test.go:211: âœ… Re-inscripciÃ³n exitosa
    activity_capacity_test.go:212: ================================================================================
--- PASS: TestActivityCapacityLimit (1.26s)
=== RUN   TestConcurrentInscriptions
    activity_capacity_test.go:243: ğŸš€ Iniciando test de integraciÃ³n: Concurrent Inscriptions
    activity_capacity_test.go:247: âœ… Admin logueado - ID: 1
    helpers.go:136: âœ… Usuario registrado - Username: user_30562, ID: 27
    activity_capacity_test.go:250: âœ… Usuario registrado - ID: 27, Username: user_30562
    activity_capacity_test.go:262: 
        ğŸ“ InscribiÃ©ndose a 5 actividades en paralelo
    activity_capacity_test.go:304: âœ… Inscripciones simultÃ¡neas: 1 de 5 exitosas
    activity_capacity_test.go:307: âœ… Al menos una inscripciÃ³n simultÃ¡nea fue exitosa (no hay race conditions graves)
    activity_capacity_test.go:310: 
        ================================================================================
    activity_capacity_test.go:311: ğŸ‰ TEST DE INSCRIPCIONES CONCURRENTES COMPLETADO!
    activity_capacity_test.go:312: ================================================================================
--- PASS: TestConcurrentInscriptions (0.23s)
=== RUN   TestCashPaymentFlowWithPlanRestrictions
    cash_payment_and_restrictions_test.go:33: ğŸš€ Iniciando test de integraciÃ³n completo: Cash Payment + Plan Restrictions
    cash_payment_and_restrictions_test.go:38: 
        ğŸ“ PASO 1: Registrar nuevo usuario con datos vÃ¡lidos
    helpers.go:136: âœ… Usuario registrado - Username: user_665053, ID: 28
    cash_payment_and_restrictions_test.go:40: âœ… Usuario registrado y logueado - Username: user_665053, ID: 28
    cash_payment_and_restrictions_test.go:45: 
        ğŸ“ PASO 2: Login como admin
    cash_payment_and_restrictions_test.go:47: âœ… Admin logueado - ID: 1, Token: Bearer eyJhbGciOiJIU...
    cash_payment_and_restrictions_test.go:52: 
        ğŸ“ PASO 3: Crear suscripciÃ³n con Plan BÃ¡sico (limitado a yoga y spinning)
    cash_payment_and_restrictions_test.go:54: âœ… SuscripciÃ³n creada - ID: 6928a0dd5d377ac363522e4d
    cash_payment_and_restrictions_test.go:61: âœ… SuscripciÃ³n en estado: pendiente_pago
    cash_payment_and_restrictions_test.go:66: 
        ğŸ“ PASO 4: Crear pago en efectivo
    cash_payment_and_restrictions_test.go:68: âœ… Pago en efectivo creado - ID: 6928a0ddc18923d549b1d228
    cash_payment_and_restrictions_test.go:78: âœ… Pago en estado: pending, Gateway: cash
    cash_payment_and_restrictions_test.go:83: 
        ğŸ“ PASO 5: Admin aprueba el pago en efectivo
    cash_payment_and_restrictions_test.go:85: âœ… Pago aprobado por admin
    cash_payment_and_restrictions_test.go:92: âœ… Pago actualizado a estado: completed
    cash_payment_and_restrictions_test.go:97: 
        ğŸ“ PASO 6: Activando suscripciÃ³n...
    cash_payment_and_restrictions_test.go:108: âœ… SuscripciÃ³n activada! Estado: activa, PagoID: 6928a0ddc18923d549b1d228
    cash_payment_and_restrictions_test.go:113: 
        ğŸ“ PASO 7: Verificar suscripciÃ³n activa desde endpoint /active
    cash_payment_and_restrictions_test.go:118: âœ… SuscripciÃ³n activa verificada - Plan: Plan BÃ¡sico
    cash_payment_and_restrictions_test.go:123: 
        ğŸ“ PASO 8: Intentar inscribirse a Funcional (NO permitida por Plan BÃ¡sico)
    cash_payment_and_restrictions_test.go:128: âœ… InscripciÃ³n bloqueada correctamente! Error: La actividad no existe
    cash_payment_and_restrictions_test.go:132: âš ï¸  Mensaje de error diferente al esperado: La actividad no existe
    cash_payment_and_restrictions_test.go:138: 
        ğŸ“ PASO 9: Limpiar inscripciones previas a Yoga si existen
    cash_payment_and_restrictions_test.go:152: 
        ğŸ“ PASO 10: Inscribirse a Yoga (permitida por Plan BÃ¡sico)
    cash_payment_and_restrictions_test.go:163: âœ… InscripciÃ³n exitosa a Yoga! UsuarioID: 28, ActividadID: 1
    cash_payment_and_restrictions_test.go:168: 
        ğŸ“ PASO 11: Verificar lista de inscripciones del usuario
    cash_payment_and_restrictions_test.go:180: âœ… InscripciÃ³n a Yoga encontrada en la lista (Total inscripciones: 1)
    cash_payment_and_restrictions_test.go:186: 
        ================================================================================
    cash_payment_and_restrictions_test.go:187: ğŸ‰ TEST COMPLETADO EXITOSAMENTE!
    cash_payment_and_restrictions_test.go:188: ================================================================================
    cash_payment_and_restrictions_test.go:189: âœ… Login de usuario y admin
    cash_payment_and_restrictions_test.go:190: âœ… CreaciÃ³n de suscripciÃ³n con Plan BÃ¡sico (limitado)
    cash_payment_and_restrictions_test.go:191: âœ… CreaciÃ³n de pago en efectivo
    cash_payment_and_restrictions_test.go:192: âœ… AprobaciÃ³n de pago por admin
    cash_payment_and_restrictions_test.go:193: âœ… ActivaciÃ³n automÃ¡tica de suscripciÃ³n via RabbitMQ
    cash_payment_and_restrictions_test.go:194: âœ… Bloqueo de inscripciÃ³n a actividad NO permitida
    cash_payment_and_restrictions_test.go:195: âœ… InscripciÃ³n exitosa a actividad permitida
    cash_payment_and_restrictions_test.go:196: ================================================================================
--- PASS: TestCashPaymentFlowWithPlanRestrictions (0.31s)
=== RUN   TestJWTSecurityValidation
    jwt_security_test.go:13: ğŸš€ Iniciando test de integraciÃ³n: JWT Security Validation
    jwt_security_test.go:18: 
        ğŸ“ PASO 1: Registrar nuevo usuario
    helpers.go:136: âœ… Usuario registrado - Username: user_548421, ID: 29
    jwt_security_test.go:20: âœ… Usuario registrado - Username: user_548421, ID: 29
    jwt_security_test.go:23: âœ… Admin logueado - ID: 1
    jwt_security_test.go:26: 
        ğŸ“ PASO 2: Intentar acceder a actividades SIN token (debe retornar 401)
    jwt_security_test.go:37: âœ… Correctamente bloqueado sin token - Status: 401
    jwt_security_test.go:44: 
        ğŸ“ PASO 3: Intentar con token INVÃLIDO (debe retornar 401)
    jwt_security_test.go:55: âœ… Correctamente bloqueado con token invÃ¡lido - Status: 401
    jwt_security_test.go:62: 
        ğŸ“ PASO 4: Crear suscripciÃ³n con token vÃ¡lido
    jwt_security_test.go:65: âœ… SuscripciÃ³n creada - ID: 6928a0de5d377ac363522e4e
    jwt_security_test.go:70: âœ… Usuario puede acceder a su propia suscripciÃ³n con token vÃ¡lido
    jwt_security_test.go:74: 
        ğŸ“ PASO 5: Usuario normal intenta crear actividad (requiere admin)
    jwt_security_test.go:101: âœ… Correctamente bloqueado usuario sin permisos de admin - Status: 403
    jwt_security_test.go:109: 
        ğŸ“ PASO 6: Admin crea actividad (debe funcionar)
    jwt_security_test.go:127: âœ… Admin creÃ³ actividad exitosamente - Respuesta: map[categoria:yoga cupo:10 descripcion:Intento de creaciÃ³n sin permisos dia:Lunes foto_url:https://images.unsplash.com/photo-1544367567-0f2fcb009e0b horario_final:11:00 horario_inicio:10:00 id:92 instructor:Test Instructor lugares:0 sucursal_id:1 titulo:Actividad No Autorizada]
    jwt_security_test.go:136: 
        ğŸ“ PASO 7: Usuario normal intenta aprobar pago (requiere admin)
    jwt_security_test.go:168: âœ… Pago creado - ID: 6928a0dec18923d549b1d229
    jwt_security_test.go:189: âš ï¸  ADVERTENCIA: Usuario normal pudo aprobar pago (deberÃ­a requerir admin)
    jwt_security_test.go:195: 
        ğŸ“ PASO 8: Acceder a /inscripciones sin token
    jwt_security_test.go:207: âœ… Correctamente bloqueado acceso sin token - Status: 401
    jwt_security_test.go:215: 
        ================================================================================
    jwt_security_test.go:216: ğŸ‰ TEST DE VALIDACIÃ“N DE JWT Y SEGURIDAD COMPLETADO!
    jwt_security_test.go:217: ================================================================================
    jwt_security_test.go:218: âœ… Login vÃ¡lido funciona correctamente
    jwt_security_test.go:219: âœ… Requests sin token son bloqueados
    jwt_security_test.go:220: âœ… Tokens invÃ¡lidos son rechazados
    jwt_security_test.go:221: âœ… Usuarios pueden acceder a sus propios recursos
    jwt_security_test.go:222: âœ… Endpoints de admin estÃ¡n protegidos
    jwt_security_test.go:223: âœ… SeparaciÃ³n de permisos funcionando
    jwt_security_test.go:224: ================================================================================
--- PASS: TestJWTSecurityValidation (0.16s)
=== RUN   TestPaymentCreationFlow
    payment_workflow_test.go:13: ğŸš€ Iniciando test de flujo de pagos
    payment_workflow_test.go:16: 
        ğŸ“ Paso 1: Registrar usuario y obtener admin token
    helpers.go:136: âœ… Usuario registrado - Username: user_922498, ID: 30
    payment_workflow_test.go:18: âœ… Usuario registrado - ID: 30
    payment_workflow_test.go:21: âœ… Admin logueado
=== RUN   TestPaymentCreationFlow/Create_cash_payment_for_subscription
    payment_workflow_test.go:26: âœ… SuscripciÃ³n creada - ID: 6928a0de5d377ac363522e4f
=== RUN   TestPaymentCreationFlow/Create_cash_payment_for_subscription/Update_payment_status_to_completed
=== RUN   TestPaymentCreationFlow/Create_cash_payment_for_subscription/Get_payment_by_ID
=== RUN   TestPaymentCreationFlow/Create_payment_with_invalid_data
--- PASS: TestPaymentCreationFlow (0.07s)
    --- PASS: TestPaymentCreationFlow/Create_cash_payment_for_subscription (0.04s)
        --- PASS: TestPaymentCreationFlow/Create_cash_payment_for_subscription/Update_payment_status_to_completed (0.01s)
        --- PASS: TestPaymentCreationFlow/Create_cash_payment_for_subscription/Get_payment_by_ID (0.01s)
    --- PASS: TestPaymentCreationFlow/Create_payment_with_invalid_data (0.00s)
=== RUN   TestPaymentListingAndFiltering
=== RUN   TestPaymentListingAndFiltering/Get_all_payments
    payment_workflow_test.go:188: Found 109 payments
=== RUN   TestPaymentListingAndFiltering/Get_payments_by_user
=== RUN   TestPaymentListingAndFiltering/Get_payments_by_status
    payment_workflow_test.go:241: Expected status 200, got: 404
--- FAIL: TestPaymentListingAndFiltering (0.18s)
    --- PASS: TestPaymentListingAndFiltering/Get_all_payments (0.15s)
    --- PASS: TestPaymentListingAndFiltering/Get_payments_by_user (0.01s)
    --- FAIL: TestPaymentListingAndFiltering/Get_payments_by_status (0.00s)
=== RUN   TestPaymentAuthorizationRules
    helpers.go:136: âœ… Usuario registrado - Username: user_929680, ID: 31
    payment_workflow_test.go:260: âœ… Usuario registrado - ID: 31
=== RUN   TestPaymentAuthorizationRules/Regular_user_cannot_create_payments
    payment_workflow_test.go:292: Regular user should not be able to create payments
=== RUN   TestPaymentAuthorizationRules/User_can_view_their_own_payments
--- FAIL: TestPaymentAuthorizationRules (0.39s)
    --- FAIL: TestPaymentAuthorizationRules/Regular_user_cannot_create_payments (0.01s)
    --- PASS: TestPaymentAuthorizationRules/User_can_view_their_own_payments (0.01s)
=== RUN   TestPlanUpgradeFlow
    plan_upgrade_test.go:9: ğŸš€ Iniciando test de integraciÃ³n: Plan Upgrade Flow
    plan_upgrade_test.go:12: 
        ğŸ“ PASO 1: Login como usuario regular
    plan_upgrade_test.go:14: âœ… Usuario logueado - ID: 5, Token: Bearer eyJhbGciOiJIU...
    plan_upgrade_test.go:16: 
        ğŸ“ PASO 2: Login como admin
    plan_upgrade_test.go:18: âœ… Admin logueado - ID: 1, Token: Bearer eyJhbGciOiJIU...
    plan_upgrade_test.go:21: 
        ğŸ“ PASO 3: Crear suscripciÃ³n con Plan BÃ¡sico (limitado)
    helpers.go:241: âŒ Error creando suscripciÃ³n - Status: 400, Body: {"error":"ya tienes una suscripciÃ³n activa. No puedes crear otra hasta que expire o sea cancelada"}
--- FAIL: TestPlanUpgradeFlow (0.01s)
=== RUN   TestRateLimiting
    rate_limiting_test.go:13: ğŸš€ Iniciando test de integraciÃ³n: Rate Limiting
    rate_limiting_test.go:18: 
        ğŸ“ PASO 1: Login normal (debe funcionar)
    rate_limiting_test.go:38: âš ï¸  Login normal fallÃ³ - Status: 400
    rate_limiting_test.go:42: 
        ğŸ“ PASO 2: Enviar mÃºltiples requests rÃ¡pidas para activar rate limiting
    rate_limiting_test.go:77: â„¹ï¸  Resultados: 0 exitosos, 0 bloqueados
    rate_limiting_test.go:82: âš ï¸  No se activÃ³ el rate limiting (puede requerir mÃ¡s requests o configuraciÃ³n)
    rate_limiting_test.go:115: 
        ğŸ“ PASO 5: Verificar que el rate limiting es por IP/usuario
    rate_limiting_test.go:138: â„¹ï¸  Status: 400
    rate_limiting_test.go:142: 
        ================================================================================
    rate_limiting_test.go:143: ğŸ‰ TEST DE RATE LIMITING COMPLETADO!
    rate_limiting_test.go:144: ================================================================================
    rate_limiting_test.go:145: âœ… Login normal funciona correctamente
    rate_limiting_test.go:150: â„¹ï¸  Rate limiting no se activÃ³ en este test
    rate_limiting_test.go:152: âœ… Comportamiento de rate limiting verificado
    rate_limiting_test.go:153: ================================================================================
    rate_limiting_test.go:154: 
        â„¹ï¸  NOTA: El rate limiting puede variar segÃºn la configuraciÃ³n del servidor
    rate_limiting_test.go:155: â„¹ï¸  En producciÃ³n, el lÃ­mite tÃ­pico es de 5-10 requests por minuto
--- PASS: TestRateLimiting (2.23s)
=== RUN   TestRateLimitingOnDifferentEndpoints
    rate_limiting_test.go:160: ğŸš€ Iniciando test: Rate Limiting on Different Endpoints
    rate_limiting_test.go:166: âœ… Usuario logueado - ID: 5
    rate_limiting_test.go:169: 
        ğŸ“ Test: Verificar rate limiting en /inscripciones
    rate_limiting_test.go:196: â„¹ï¸  Rate limiting no se activÃ³ en /inscripciones (puede tener lÃ­mite diferente)
    rate_limiting_test.go:199: 
        ================================================================================
    rate_limiting_test.go:200: ğŸ‰ TEST COMPLETADO!
    rate_limiting_test.go:201: ================================================================================
--- PASS: TestRateLimitingOnDifferentEndpoints (1.77s)
=== RUN   TestSearchAPI_HealthCheck
    search_api_test.go:45: ğŸš€ Iniciando test: Search API Health Check
    search_api_test.go:62: âœ… Search API Status: ok
    search_api_test.go:63: âœ… Solr: connected
    search_api_test.go:64: âœ… Cache: connected
    search_api_test.go:74: ================================================================================
    search_api_test.go:75: ğŸ‰ TEST HEALTH CHECK COMPLETADO!
    search_api_test.go:76: ================================================================================
--- PASS: TestSearchAPI_HealthCheck (0.28s)
=== RUN   TestSearchAPI_SearchByQuery
    search_api_test.go:80: ğŸš€ Iniciando test: Search API - BÃºsqueda por Query
    search_api_test.go:82: 
        ğŸ“ PASO 1: Buscar actividades con query 'yoga'
    search_api_test.go:98: âœ… BÃºsqueda 'yoga' retornÃ³ 12 resultados
    search_api_test.go:106:    - Yoga Vespertino (categorÃ­a: yoga)
    search_api_test.go:106:    - Yoga Matutino ACTUALIZADO (categorÃ­a: yoga)
    search_api_test.go:106:    - Yoga Matutino Avanzado (categorÃ­a: yoga)
    search_api_test.go:106:    - Yoga Vespertino Relajante (categorÃ­a: yoga)
    search_api_test.go:106:    - Actividad No Autorizada (categorÃ­a: yoga)
    search_api_test.go:109: 
        ğŸ“ PASO 2: Buscar actividades con query 'spinning'
    search_api_test.go:118: âœ… BÃºsqueda 'spinning' retornÃ³ 3 resultados
    search_api_test.go:120: 
        ğŸ“ PASO 3: Buscar con query que no existe
    search_api_test.go:129: âœ… BÃºsqueda inexistente retornÃ³ 0 resultados (esperado: 0)
    search_api_test.go:131: 
        ================================================================================
    search_api_test.go:132: ğŸ‰ TEST BÃšSQUEDA POR QUERY COMPLETADO!
    search_api_test.go:133: ================================================================================
--- PASS: TestSearchAPI_SearchByQuery (0.14s)
=== RUN   TestSearchAPI_SearchByCategory
    search_api_test.go:137: ğŸš€ Iniciando test: Search API - BÃºsqueda por CategorÃ­a
    search_api_test.go:142: 
        ğŸ“ Buscando categorÃ­a: yoga
    search_api_test.go:153: âœ… CategorÃ­a 'yoga' retornÃ³ 12 resultados
    search_api_test.go:142: 
        ğŸ“ Buscando categorÃ­a: spinning
    search_api_test.go:153: âœ… CategorÃ­a 'spinning' retornÃ³ 3 resultados
    search_api_test.go:142: 
        ğŸ“ Buscando categorÃ­a: funcional
    search_api_test.go:153: âœ… CategorÃ­a 'funcional' retornÃ³ 3 resultados
    search_api_test.go:142: 
        ğŸ“ Buscando categorÃ­a: pilates
    search_api_test.go:153: âœ… CategorÃ­a 'pilates' retornÃ³ 2 resultados
    search_api_test.go:163: 
        ================================================================================
    search_api_test.go:164: ğŸ‰ TEST BÃšSQUEDA POR CATEGORÃA COMPLETADO!
    search_api_test.go:165: ================================================================================
--- PASS: TestSearchAPI_SearchByCategory (0.23s)
=== RUN   TestSearchAPI_SearchPagination
    search_api_test.go:169: ğŸš€ Iniciando test: Search API - PaginaciÃ³n
    search_api_test.go:171: 
        ğŸ“ PASO 1: Obtener pÃ¡gina 1 con 5 elementos
    search_api_test.go:181: âœ… PÃ¡gina 1: 5 resultados de 51 total
    search_api_test.go:182:    - Page: 1, PageSize: 5, TotalPages: 11
    search_api_test.go:192: 
        ğŸ“ PASO 2: Obtener pÃ¡gina 2
    search_api_test.go:202: âœ… PÃ¡gina 2: 5 resultados
    search_api_test.go:209: âœ… PÃ¡ginas contienen resultados diferentes
    search_api_test.go:213: 
        ğŸ“ PASO 3: Verificar pÃ¡gina fuera de rango
    search_api_test.go:223: âœ… PÃ¡gina 9999: 0 resultados (esperado: 0)
    search_api_test.go:225: 
        ================================================================================
    search_api_test.go:226: ğŸ‰ TEST PAGINACIÃ“N COMPLETADO!
    search_api_test.go:227: ================================================================================
--- PASS: TestSearchAPI_SearchPagination (0.15s)
=== RUN   TestSearchAPI_SearchByDay
    search_api_test.go:231: ğŸš€ Iniciando test: Search API - BÃºsqueda por DÃ­a
    search_api_test.go:246: âœ… DÃ­a 'Lunes' retornÃ³ 11 resultados
    search_api_test.go:246: âœ… DÃ­a 'Martes' retornÃ³ 3 resultados
    search_api_test.go:246: âœ… DÃ­a 'Miercoles' retornÃ³ 3 resultados
    search_api_test.go:246: âœ… DÃ­a 'Jueves' retornÃ³ 3 resultados
    search_api_test.go:246: âœ… DÃ­a 'Viernes' retornÃ³ 2 resultados
    search_api_test.go:249: 
        ================================================================================
    search_api_test.go:250: ğŸ‰ TEST BÃšSQUEDA POR DÃA COMPLETADO!
    search_api_test.go:251: ================================================================================
--- PASS: TestSearchAPI_SearchByDay (0.21s)
=== RUN   TestSearchAPI_CombinedFilters
    search_api_test.go:255: ğŸš€ Iniciando test: Search API - Filtros Combinados
    search_api_test.go:257: 
        ğŸ“ PASO 1: Buscar yoga del Lunes
    search_api_test.go:267: âœ… 'yoga' + 'Lunes' retornÃ³ 11 resultados
    search_api_test.go:270:    - Yoga Vespertino (yoga, Lunes)
    search_api_test.go:270:    - Yoga Matutino ACTUALIZADO (yoga, Lunes)
    search_api_test.go:270:    - Yoga Matutino Avanzado (yoga, Lunes)
    search_api_test.go:273: 
        ğŸ“ PASO 2: Buscar spinning categorÃ­a especÃ­fica
    search_api_test.go:283: âœ… CategorÃ­a 'spinning' retornÃ³ 3 resultados
    search_api_test.go:285: 
        ================================================================================
    search_api_test.go:286: ğŸ‰ TEST FILTROS COMBINADOS COMPLETADO!
    search_api_test.go:287: ================================================================================
--- PASS: TestSearchAPI_CombinedFilters (0.45s)
=== RUN   TestSearchAPI_SearchPerformance
    search_api_test.go:291: ğŸš€ Iniciando test: Search API - Performance
    search_api_test.go:296: 
        ğŸ“ Ejecutando 5 bÃºsquedas para medir tiempo promedio...
    search_api_test.go:310:    - BÃºsqueda 'yoga': 18.0828ms
    search_api_test.go:310:    - BÃºsqueda 'spinning': 23.9946ms
    search_api_test.go:310:    - BÃºsqueda 'funcional': 45.9479ms
    search_api_test.go:310:    - BÃºsqueda 'clase': 71.7999ms
    search_api_test.go:310:    - BÃºsqueda 'matutino': 89.3644ms
    search_api_test.go:314: 
        âœ… Tiempo promedio de bÃºsqueda: 49.83792ms
    search_api_test.go:319: âœ… Performance dentro de parÃ¡metros aceptables (<500ms)
    search_api_test.go:322: 
        ================================================================================
    search_api_test.go:323: ğŸ‰ TEST PERFORMANCE COMPLETADO!
    search_api_test.go:324: ================================================================================
--- PASS: TestSearchAPI_SearchPerformance (0.25s)
=== RUN   TestSearchAPI_EmptyQuery
    search_api_test.go:328: ğŸš€ Iniciando test: Search API - Query VacÃ­o
    search_api_test.go:330: 
        ğŸ“ PASO 1: BÃºsqueda sin parÃ¡metros (listar todo)
    search_api_test.go:344: âœ… BÃºsqueda sin filtros retornÃ³ 51 resultados
    search_api_test.go:345:    - Mostrando pÃ¡gina 1 de 3
    search_api_test.go:351: 
        ================================================================================
    search_api_test.go:352: ğŸ‰ TEST QUERY VACÃO COMPLETADO!
    search_api_test.go:353: ================================================================================
--- PASS: TestSearchAPI_EmptyQuery (0.04s)
=== RUN   TestSearchAPI_SpecialCharacters
    search_api_test.go:357: ğŸš€ Iniciando test: Search API - Caracteres Especiales
    search_api_test.go:382: âœ… Query 'yoga%20matutino' retornÃ³ 12 resultados
    search_api_test.go:382: âœ… Query 'clase+especial' retornÃ³ 9 resultados
    search_api_test.go:382: âœ… Query 'MarÃ­a' retornÃ³ 1 resultados
    search_api_test.go:382: âœ… Query 'GonzÃ¡lez' retornÃ³ 1 resultados
    search_api_test.go:385: 
        ================================================================================
    search_api_test.go:386: ğŸ‰ TEST CARACTERES ESPECIALES COMPLETADO!
    search_api_test.go:387: ================================================================================
--- PASS: TestSearchAPI_SpecialCharacters (0.20s)
=== RUN   TestSolrSearch
    solr_search_test.go:12: ğŸš€ Iniciando test de integraciÃ³n: Solr Search
    solr_search_test.go:15: 
        ğŸ“ PASO 1: Login como admin
    solr_search_test.go:17: âœ… Admin logueado - ID: 1
    solr_search_test.go:22: 
        ğŸ“ PASO 2: Crear actividades de prueba con diferentes caracterÃ­sticas
    solr_search_test.go:107: âœ… Actividad 1 creada - 'Yoga Matutino Avanzado' (ID: 93)
    solr_search_test.go:107: âœ… Actividad 2 creada - 'Spinning Intenso' (ID: 94)
    solr_search_test.go:107: âœ… Actividad 3 creada - 'Yoga Vespertino Relajante' (ID: 95)
    solr_search_test.go:107: âœ… Actividad 4 creada - 'Funcional Matutino' (ID: 96)
    solr_search_test.go:114: 
        â„¹ï¸  Esperando indexaciÃ³n de Solr...
    solr_search_test.go:118: 
        ğŸ“ PASO 3: Buscar actividades por tÃ­tulo parcial 'Yoga'
    solr_search_test.go:130: âœ… BÃºsqueda por 'Yoga' retornÃ³ 6 resultados
    solr_search_test.go:137:    - Yoga Matutino ACTUALIZADO
    solr_search_test.go:137:    - Yoga Vespertino
    solr_search_test.go:137:    - Yoga Matutino Avanzado
    solr_search_test.go:137:    - Yoga Vespertino Relajante
    solr_search_test.go:137:    - Yoga Matutino Avanzado
    solr_search_test.go:137:    - Yoga Vespertino Relajante
    solr_search_test.go:142: âœ… Se encontraron 6 actividades de Yoga
    solr_search_test.go:148: 
        ğŸ“ PASO 4: Buscar actividades por categorÃ­a 'spinning'
    solr_search_test.go:160: âœ… BÃºsqueda por categorÃ­a 'spinning' retornÃ³ 4 resultados
    solr_search_test.go:168:    - Spinning Intenso (categorÃ­a: spinning)
    solr_search_test.go:168:    - Spinning Matutino (categorÃ­a: spinning)
    solr_search_test.go:168:    - Spinning Intenso (categorÃ­a: spinning)
    solr_search_test.go:168:    - Spinning Intenso (categorÃ­a: spinning)
    solr_search_test.go:172: 
        ğŸ“ PASO 5: Buscar actividades matutinas (horario contiene '08:00' o '07:00')
    solr_search_test.go:184: âœ… BÃºsqueda por horario '08' retornÃ³ 0 resultados
    solr_search_test.go:196: 
        ğŸ“ PASO 6: BÃºsqueda combinada: titulo='Yoga' y categoria='yoga'
    solr_search_test.go:208: âœ… BÃºsqueda combinada retornÃ³ 6 resultados
    solr_search_test.go:216:    - Yoga Matutino ACTUALIZADO (categorÃ­a: yoga)
    solr_search_test.go:216:    - Yoga Vespertino (categorÃ­a: yoga)
    solr_search_test.go:216:    - Yoga Matutino Avanzado (categorÃ­a: yoga)
    solr_search_test.go:216:    - Yoga Vespertino Relajante (categorÃ­a: yoga)
    solr_search_test.go:216:    - Yoga Matutino Avanzado (categorÃ­a: yoga)
    solr_search_test.go:216:    - Yoga Vespertino Relajante (categorÃ­a: yoga)
    solr_search_test.go:220: 
        ğŸ“ PASO 7: Listar todas las actividades (sin filtros)
    solr_search_test.go:232: âœ… Total de actividades en el sistema: 0
    solr_search_test.go:235: 
        ================================================================================
    solr_search_test.go:236: ğŸ‰ TEST DE BÃšSQUEDA CON SOLR COMPLETADO!
    solr_search_test.go:237: ================================================================================
    solr_search_test.go:238: âœ… 4 actividades de prueba creadas
    solr_search_test.go:239: âœ… BÃºsqueda por tÃ­tulo funcionando
    solr_search_test.go:240: âœ… BÃºsqueda por categorÃ­a funcionando
    solr_search_test.go:241: âœ… BÃºsqueda por horario funcionando
    solr_search_test.go:242: âœ… BÃºsqueda combinada funcionando
    solr_search_test.go:243: âœ… Total de 0 actividades disponibles
    solr_search_test.go:244: ================================================================================
--- PASS: TestSolrSearch (0.24s)
=== RUN   TestSubscriptionCancellation
    subscription_cancellation_test.go:13: ğŸš€ Iniciando test de integraciÃ³n: Subscription Cancellation
    subscription_cancellation_test.go:16: 
        ğŸ“ PASO 1: Login de usuario y admin
    subscription_cancellation_test.go:18: âœ… Admin logueado - ID: 1
    subscription_cancellation_test.go:21: âœ… Usuario logueado - ID: 5
    subscription_cancellation_test.go:24: 
        ğŸ“ PASO 2: Crear y activar suscripciÃ³n Premium
    helpers.go:241: âŒ Error creando suscripciÃ³n - Status: 400, Body: {"error":"ya tienes una suscripciÃ³n activa. No puedes crear otra hasta que expire o sea cancelada"}
--- FAIL: TestSubscriptionCancellation (0.02s)
=== RUN   TestSubscriptionExpirationAndRenewal
    subscription_expiration_test.go:12: ğŸš€ Iniciando test de integraciÃ³n: Subscription Expiration and Renewal
    subscription_expiration_test.go:15: 
        ğŸ“ PASO 1: Login como usuario regular
    subscription_expiration_test.go:17: âœ… Usuario logueado - ID: 5
    subscription_expiration_test.go:19: 
        ğŸ“ PASO 2: Login como admin
    subscription_expiration_test.go:21: âœ… Admin logueado - ID: 1
    subscription_expiration_test.go:24: 
        ğŸ“ PASO 3: Crear suscripciÃ³n con Plan Premium
    helpers.go:241: âŒ Error creando suscripciÃ³n - Status: 400, Body: {"error":"ya tienes una suscripciÃ³n activa. No puedes crear otra hasta que expire o sea cancelada"}
--- FAIL: TestSubscriptionExpirationAndRenewal (0.01s)
=== RUN   TestUnsubscribeAndResubscribe
    unsubscribe_resubscribe_test.go:13: ğŸš€ Iniciando test de integraciÃ³n: Unsubscribe and Resubscribe
    unsubscribe_resubscribe_test.go:16: 
        ğŸ“ PASO 1: Login y activaciÃ³n de suscripciÃ³n
    unsubscribe_resubscribe_test.go:18: âœ… Admin logueado - ID: 1
    unsubscribe_resubscribe_test.go:21: âœ… Usuario logueado - ID: 5
    helpers.go:241: âŒ Error creando suscripciÃ³n - Status: 400, Body: {"error":"ya tienes una suscripciÃ³n activa. No puedes crear otra hasta que expire o sea cancelada"}
--- FAIL: TestUnsubscribeAndResubscribe (0.02s)
=== RUN   TestUserRegistrationFlow
=== RUN   TestUserRegistrationFlow/Register_new_user
=== RUN   TestUserRegistrationFlow/Cannot_register_duplicate_username
=== RUN   TestUserRegistrationFlow/Cannot_register_duplicate_email
=== RUN   TestUserRegistrationFlow/Login_with_new_user
=== RUN   TestUserRegistrationFlow/Login_with_wrong_password
=== RUN   TestUserRegistrationFlow/Validate_password_requirements
=== RUN   TestUserRegistrationFlow/Validate_password_requirements/too_short
=== RUN   TestUserRegistrationFlow/Validate_password_requirements/no_uppercase
=== RUN   TestUserRegistrationFlow/Validate_password_requirements/no_lowercase
=== RUN   TestUserRegistrationFlow/Validate_password_requirements/no_number
=== RUN   TestUserRegistrationFlow/Validate_password_requirements/no_special_char
--- PASS: TestUserRegistrationFlow (0.14s)
    --- PASS: TestUserRegistrationFlow/Register_new_user (0.03s)
    --- PASS: TestUserRegistrationFlow/Cannot_register_duplicate_username (0.01s)
    --- PASS: TestUserRegistrationFlow/Cannot_register_duplicate_email (0.02s)
    --- PASS: TestUserRegistrationFlow/Login_with_new_user (0.02s)
    --- PASS: TestUserRegistrationFlow/Login_with_wrong_password (0.01s)
    --- PASS: TestUserRegistrationFlow/Validate_password_requirements (0.06s)
        --- PASS: TestUserRegistrationFlow/Validate_password_requirements/too_short (0.01s)
        --- PASS: TestUserRegistrationFlow/Validate_password_requirements/no_uppercase (0.01s)
        --- PASS: TestUserRegistrationFlow/Validate_password_requirements/no_lowercase (0.01s)
        --- PASS: TestUserRegistrationFlow/Validate_password_requirements/no_number (0.01s)
        --- PASS: TestUserRegistrationFlow/Validate_password_requirements/no_special_char (0.01s)
=== RUN   TestUserProfileManagement
--- FAIL: TestUserProfileManagement (0.01s)
panic: interface conversion: interface {} is nil, not string [recovered]
	panic: interface conversion: interface {} is nil, not string

goroutine 501 [running]:
testing.tRunner.func1.2({0x7a3a20, 0xc0001862d0})
	C:/Program Files/Go/src/testing/testing.go:1734 +0x219
testing.tRunner.func1()
	C:/Program Files/Go/src/testing/testing.go:1737 +0x359
panic({0x7a3a20?, 0xc0001862d0?})
	C:/Program Files/Go/src/runtime/panic.go:792 +0x132
github.com/yourusername/gym-management/tests/integration.TestUserProfileManagement(0xc0002a2a80)
	C:/Users/eli_v/ivo/backend/tests/integration/user_registration_flow_test.go:251 +0x755
testing.tRunner(0xc0002a2a80, 0x826c98)
	C:/Program Files/Go/src/testing/testing.go:1792 +0xcb
created by testing.(*T).Run in goroutine 1
	C:/Program Files/Go/src/testing/testing.go:1851 +0x3f6
exit status 2
FAIL	github.com/yourusername/gym-management/tests/integration	11.020s
